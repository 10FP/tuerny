<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeni Blog Yaz</title>
    <script>
        function addContentField() {
            var container = document.getElementById("content-container");
            var html = `
                <div class="content-block">
                    <select name="content_type[]" required>
                        <option value="header">Başlık</option>
                        <option value="subheader">Alt Başlık</option>
                        <option value="paragraph">Paragraf</option>
                        <option value="image">Resim</option>
                        <option value="video">Video</option>
                        <option value="product">Ürün</option>
                    </select>
                    <input type="text" name="content_text[]" placeholder="Metin (Başlık/Paragraf)">
                    <input type="file" name="content_image[]" accept="image/*">
                    <input type="url" name="content_video[]" placeholder="Video URL">
                    <select name="content_product[]">
                        <option value="">Ürün Seç</option>
                        {% for product in products %}
                            <option value="{{ product.id }}">{{ product.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" onclick="this.parentElement.remove()">Sil</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }
    </script>
</head>
<body>
    <h1>Yeni Blog Yaz</h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <label>Başlık:</label>
        <input type="text" name="title" required>

        <label>Kategori:</label>
        <select name="category" required>
            <option value="">Seçiniz</option>
            {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
            {% endfor %}
        </select>

        <label>Kısa Açıklama:</label>
        <textarea name="short_description"></textarea>

        <label>Ana Resim:</label>
        <input type="file" name="media" accept="image/*">

        <label>Ekstra Medya:</label>
        <input type="file" name="media_extra">

        <label>Ana Ürün Seç:</label>
        <select name="product">
            <option value="">Ürün Seç</option>
            {% for product in products %}
                <option value="{{ product.id }}">{{ product.title }}</option>
            {% endfor %}
        </select>

        <label>Ekstra Ürünler Seç:</label>
        <select name="extra_product" multiple>
            {% for product in products %}
                <option value="{{ product.id }}">{{ product.title }}</option>
            {% endfor %}
        </select>

        <h2>Blog İçeriği</h2>
        <div id="content-container"></div>
        <button type="button" onclick="addContentField()">Yeni İçerik Ekle</button>

        <br><br>
        <button type="submit">Blogu Yayınla</button>
    </form>
</body>
</html>